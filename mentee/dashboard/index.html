<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Buddy - Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
    <link href="https://api.fontshare.com/v2/css?f[]=boska@700,900&f[]=switzer@400,500,600,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/styles/design-system.css">
    <link rel="stylesheet" href="/styles/mentee-dashboard.css">
    <script src="https://unpkg.com/@phosphor-icons/web@2.0.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>

<body>
    <div id="app" style="display: contents;">
        <!-- Sidebar -->
        <nav class="sidebar" :class="{ 'open': sidebarOpen }">
            <button class="mobile-close-btn" @click="toggleSidebar"
                style="position: absolute; top: 1rem; right: 1rem; background: transparent; border: none; font-size: 1.5rem; color: var(--text-secondary); cursor: pointer; display: none;">
                <i class="ph-bold ph-x"></i>
            </button>
            <div class="logo">
                <i class="ph-bold ph-graduation-cap"></i>
                <span>Study Buddy</span>
            </div>

            <div class="nav-items">
                <button @click="activeTab = 'overview'" :class="['nav-item', {active: activeTab === 'overview'}]">
                    <i class="ph-bold ph-house-simple"></i>
                    Home
                </button>

                <button @click="activeTab = 'subjects'" :class="['nav-item', {active: activeTab === 'subjects'}]">
                    <i class="ph-bold ph-book-open-text"></i>
                    My Courses
                </button>

                <button @click="activeTab = 'ai_assistant'"
                    :class="['nav-item', {active: activeTab === 'ai_assistant'}]">
                    <i class="ph-bold ph-sparkle"></i>
                    AI Assistant
                </button>

                <button @click="activeTab = 'calendar'" :class="['nav-item', {active: activeTab === 'calendar'}]">
                    <i class="ph-bold ph-calendar-check"></i>
                    Calendar
                </button>

                <button @click="activeTab = 'community'" :class="['nav-item', {active: activeTab === 'community'}]">
                    <i class="ph-bold ph-users"></i>
                    Community
                </button>

                <button @click="activeTab = 'notes'" :class="['nav-item', {active: activeTab === 'notes'}]">
                    <i class="ph-bold ph-notebook"></i>
                    Notes
                </button>

                <button @click="activeTab = 'whiteboard'" :class="['nav-item', {active: activeTab === 'whiteboard'}]">
                    <i class="ph-bold ph-chalkboard"></i>
                    Whiteboard
                </button>
            </div>

            <div class="sidebar-bottom">
                <!-- Settings acting as Holiday Mode for now, or just Settings link -->
                <button class="nav-item" @click="activeTab = 'settings'">
                    <i class="ph-bold ph-gear"></i>
                    Settings
                </button>

                <div class="profile" @click="toggleHolidayMode" style="cursor: pointer; margin-top: 1rem;"
                    title="Click to toggle Dark Mode">
                    <div class="avatar">
                        <span>AD</span>
                    </div>
                    <div class="profile-info">
                        <div class="name">Arnav R</div>
                        <div class="grade">Grade 10</div>
                    </div>
                    <i class="ph-bold ph-caret-up-down" style="color: var(--text-secondary); margin-left: auto;"></i>
                </div>
            </div>
        </nav>

        <!-- Main Layout (Content + Right Panel) -->
        <!-- Main Layout (Content + Right Panel) -->
        <main class="main-layout" :class="{'full-width': activeTab !== 'overview'}">

            <!-- Center Content Area -->
            <div class="content-area">

                <!-- Header -->
                <header class="top-header">
                    <div class="greeting" style="display: flex; align-items: center; gap: 1rem;">
                        <button class="mobile-menu-btn" @click="toggleSidebar">
                            <i class="ph-bold ph-list"></i>
                        </button>
                        <div>
                            <h1>Hi Arnav,</h1>
                            <p>Ready for your study session?</p>
                        </div>
                    </div>

                    <div class="header-actions">
                        <div class="search-bar">
                            <i class="ph-bold ph-magnifying-glass"></i>
                            <input type="text" placeholder="Search">
                        </div>

                        <button class="notif-btn">
                            <i class="ph-bold ph-bell"></i>
                            <div class="notif-badge">2</div>
                        </button>
                    </div>
                </header>

                <!-- Main Views -->

                <!-- Overview / Home -->
                <div v-if="activeTab === 'overview'" class="tab-content fade-in">

                    <!-- Hero Section -->
                    <!-- Hero Section - Simplified -->
                    <!-- Metrics Grid -->
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon bg-soft-teal">
                                <i class="ph-bold ph-clock"></i>
                            </div>
                            <div class="metric-info">
                                <span class="metric-value">12.5h</span>
                                <span class="metric-label">Study Time</span>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon bg-soft-purple">
                                <i class="ph-bold ph-check-circle"></i>
                            </div>
                            <div class="metric-info">
                                <span class="metric-value">4/5</span>
                                <span class="metric-label">Sessions Done</span>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon bg-soft-orange">
                                <i class="ph-bold ph-trend-up"></i>
                            </div>
                            <div class="metric-info">
                                <span class="metric-value">A-</span>
                                <span class="metric-label">Avg. Grade</span>
                            </div>
                        </div>
                    </div>

                    <!-- Learning Path Section -->
                    <div class="section-title" style="margin-top: 3rem;">
                        <h3>Your Subjects</h3>
                    </div>

                    <div class="learning-path-grid">

                        <!-- Chemistry Card -->
                        <div class="lp-card" @click="activeTab = 'subjects'">
                            <div class="lp-header" style="flex-direction: column; align-items: flex-start; gap: 10px;">
                                <div class="subject-icon-bg"
                                    style="background: #E0F2F1; color: #14b8a6; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="ph-bold ph-flask" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>

                            <div class="lp-body" style="margin-top: 0.5rem;">
                                <div class="lp-title" style="font-size: 1.25rem; margin-bottom: 0.5rem;">Chemistry</div>
                                <div class="lp-meta" style="display: flex; gap: 10px; font-weight: 500;">
                                    <span><i class="ph-bold ph-video"></i> 8 Sessions</span>
                                    <span><i class="ph-bold ph-exam"></i> Grade B+</span>
                                </div>
                            </div>

                            <div class="lp-footer"
                                style="margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1rem; width: 100%;">
                                <div class="instructor"
                                    style="display: flex; align-items: center; gap: 0.75rem; font-size: 0.9rem; color: var(--text-secondary);">
                                    <div
                                        style="width: 24px; height: 24px; background: #ddd; border-radius: 50%; overflow: hidden;">
                                        <!-- Placeholder Instructor Image or Icon -->
                                        <i class="ph-fill ph-user"
                                            style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #999; color: white; font-size: 14px;"></i>
                                    </div>
                                    <span>Priya Sharma</span>
                                </div>
                            </div>
                        </div>

                        <!-- Math Card -->
                        <div class="lp-card" @click="activeTab = 'subjects'">
                            <div class="lp-header" style="flex-direction: column; align-items: flex-start; gap: 10px;">
                                <div class="subject-icon-bg"
                                    style="background: #FFF7ED; color: #EA580C; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="ph-bold ph-math-operations" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>

                            <div class="lp-body" style="margin-top: 0.5rem;">
                                <div class="lp-title" style="font-size: 1.25rem; margin-bottom: 0.5rem;">Mathematics
                                </div>
                                <div class="lp-meta" style="display: flex; gap: 10px; font-weight: 500;">
                                    <span><i class="ph-bold ph-video"></i> 12 Sessions</span>
                                    <span><i class="ph-bold ph-exam"></i> Grade C</span>
                                </div>
                            </div>

                            <div class="lp-footer"
                                style="margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1rem; width: 100%;">
                                <div class="instructor"
                                    style="display: flex; align-items: center; gap: 0.75rem; font-size: 0.9rem; color: var(--text-secondary);">
                                    <div
                                        style="width: 24px; height: 24px; background: #ddd; border-radius: 50%; overflow: hidden;">
                                        <i class="ph-fill ph-user"
                                            style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #999; color: white; font-size: 14px;"></i>
                                    </div>
                                    <span>Amit Patel</span>
                                </div>
                            </div>
                        </div>

                        <!-- English Card -->
                        <div class="lp-card" @click="activeTab = 'subjects'">
                            <div class="lp-header" style="flex-direction: column; align-items: flex-start; gap: 10px;">
                                <div class="subject-icon-bg"
                                    style="background: #F3F4F6; color: #4B5563; width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                    <i class="ph-bold ph-book-open" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>

                            <div class="lp-body" style="margin-top: 0.5rem;">
                                <div class="lp-title" style="font-size: 1.25rem; margin-bottom: 0.5rem;">English</div>
                                <div class="lp-meta" style="display: flex; gap: 10px; font-weight: 500;">
                                    <span><i class="ph-bold ph-video"></i> 6 Sessions</span>
                                    <span><i class="ph-bold ph-exam"></i> Grade A</span>
                                </div>
                            </div>

                            <div class="lp-footer"
                                style="margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1rem; width: 100%;">
                                <div class="instructor"
                                    style="display: flex; align-items: center; gap: 0.75rem; font-size: 0.9rem; color: var(--text-secondary);">
                                    <div
                                        style="width: 24px; height: 24px; background: #ddd; border-radius: 50%; overflow: hidden;">
                                        <i class="ph-fill ph-user"
                                            style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #999; color: white; font-size: 14px;"></i>
                                    </div>
                                    <span>Neha Singh</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Fallback for other tabs (keeping functional logic, just wrapping) -->
                <div v-if="activeTab !== 'overview'" class="tab-content">
                    <div style="padding: 2rem; border-radius: 20px; background: var(--bg-card); min-height: 500px;">
                        <!-- Using existing logic for other tabs but updated container -->

                        <div v-if="activeTab === 'calendar'">
                            <div class="section-title" style="margin-bottom: 1.5rem;">
                                <h3>Calendar & Schedule</h3>
                            </div>
                            <!-- (Reusing existing VUE logic for calendar below) -->
                            <div class="calendar-header"
                                style="margin-top: 1.5rem; display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                                <h2 style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary);">{{
                                    currentMonth }}</h2>
                                <div class="calendar-controls" style="display: flex; gap: 1rem;">
                                    <button class="calendar-nav" @click="changeMonth(-1)"
                                        style="background: var(--bg-body); border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer;"><i
                                            class="ph-bold ph-caret-left"></i></button>
                                    <button class="calendar-nav" @click="changeMonth(1)"
                                        style="background: var(--bg-body); border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer;"><i
                                            class="ph-bold ph-caret-right"></i></button>
                                </div>
                            </div>
                            <div class="calendar-grid"
                                style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 1rem; text-align: center;">
                                <div class="day-header" v-for="day in ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']"
                                    :key="day" style="font-weight: 600; color: var(--text-secondary);">{{ day }}</div>
                                <div v-for="day in calendarDays" :key="day.date"
                                    :class="['calendar-day', {today: day.isToday}]"
                                    style="aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding: 5px; border-radius: 12px; position: relative; cursor: pointer;"
                                    :style="{ background: day.isToday ? 'var(--primary-color)' : 'transparent', color: day.isToday ? 'white' : 'var(--text-primary)', border: day.isCurrentMonth ? '1px solid var(--border-color)' : 'none', opacity: day.isCurrentMonth ? 1 : 0.3 }">
                                    <span class="day-number" style="font-weight: 700;">{{ day.day }}</span>
                                    <div style="display: flex; gap: 2px; margin-top: 4px;">
                                        <div v-for="event in day.events.slice(0,3)" :key="event.id" class="session-dot"
                                            :style="{background: event.color, width: '6px', height: '6px', borderRadius: '50%'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div v-if="activeTab === 'subjects'">
                            <h2>My Courses</h2>
                            <div class="subjects-grid" style="margin-top:20px; display: grid; gap: 1.5rem;">
                                <div v-for="subject in mySubjects" :key="subject.name" class="subject-card"
                                    style="padding: 1.5rem; background: var(--bg-body); border-radius: 16px;">
                                    <h3>{{ subject.name }}</h3>
                                    <div class="progress-bar"
                                        style="height: 8px; background: #e0e0e0; border-radius: 4px; margin-top: 10px; overflow: hidden;">
                                        <div class="progress-fill"
                                            :style="{width: subject.progress + '%', background: 'var(--primary-color)', height: '100%'}">
                                        </div>
                                    </div>
                                    <div style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">{{
                                        subject.progress }}% Complete</div>
                                </div>
                            </div>
                        </div>

                        <!-- Community Tab -->
                        <div v-if="activeTab === 'community'">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                                <h2>Community Forum</h2>
                                <button @click="showAskQuestionModal = true"
                                    style="background: var(--primary-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                                    <i class="ph-bold ph-pencil-simple"></i> Ask Question
                                </button>
                            </div>

                            <div class="questions-list" style="display: flex; flex-direction: column; gap: 1.5rem;">
                                <div v-for="q in communityQuestions" :key="q.id" class="question-card"
                                    style="background: var(--bg-body); padding: 1.5rem; border-radius: 16px; border: 1px solid var(--border-color);">
                                    <div class="q-header"
                                        style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                        <span class="q-subject"
                                            style="background: var(--primary-light); color: var(--primary-color); padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 700;">{{
                                            q.subject }}</span>
                                        <span class="q-time" style="font-size: 0.8rem; color: var(--text-secondary);">{{
                                            q.time }}</span>
                                    </div>
                                    <h3 class="q-title"
                                        style="font-size: 1.1rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.5rem;">
                                        {{ q.title }}</h3>
                                    <p class="q-body"
                                        style="font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.5;">
                                        {{ q.body }}</p>

                                    <div class="q-footer"
                                        style="display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--border-color); padding-top: 1rem;">
                                        <div class="q-user" style="display: flex; align-items: center; gap: 0.5rem;">
                                            <div
                                                style="width: 24px; height: 24px; background: #FF9966; color: white; border-radius: 50%; font-size: 10px; display: flex; align-items: center; justify-content: center; font-weight: 700;">
                                                {{ q.userInitials }}</div>
                                            <span
                                                style="font-size: 0.9rem; font-weight: 600; color: var(--text-primary);">{{
                                                q.userName }}</span>
                                        </div>
                                        <div class="q-stats"
                                            style="display: flex; gap: 1rem; font-size: 0.9rem; color: var(--text-secondary);">
                                            <span><i class="ph-bold ph-chat-text"></i> {{ q.answers }}</span>
                                            <span><i class="ph-bold ph-thumbs-up"></i> {{ q.upvotes }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notes Tab -->
                        <div v-if="activeTab === 'notes'" class="notes-layout">
                            <!-- Notes List -->
                            <div class="notes-sidebar">
                                <button @click="createNewNote"
                                    style="width: 100%; background: var(--primary-color); color: white; border: none; padding: 0.8rem; border-radius: 12px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: transform 0.1s;">
                                    <i class="ph-bold ph-plus"></i> New Note
                                </button>
                                <div class="notes-list">
                                    <div v-for="note in notes" :key="note.id" @click="selectNote(note)"
                                        :class="['note-item', {active: selectedNote && selectedNote.id === note.id}]">
                                        <h4
                                            style="font-size: 0.95rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary);">
                                            {{ note.title }}</h4>
                                        <span style="font-size: 0.75rem; color: var(--text-secondary);">{{ note.date
                                            }}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Note Editor -->
                            <div class="note-editor">
                                <div v-if="selectedNote" style="display: flex; flex-direction: column; height: 100%;">
                                    <input v-model="selectedNote.title" class="note-title-input"
                                        placeholder="Note Title">
                                    <div class="editor-toolbar">
                                        <button @click="formatText('bold')"
                                            style="background: transparent; border: none; cursor: pointer; color: var(--text-primary); font-size: 1.1rem;"><i
                                                class="ph-bold ph-text-b"></i></button>
                                        <button @click="formatText('italic')"
                                            style="background: transparent; border: none; cursor: pointer; color: var(--text-primary); font-size: 1.1rem;"><i
                                                class="ph-bold ph-text-italic"></i></button>
                                        <button @click="formatText('underline')"
                                            style="background: transparent; border: none; cursor: pointer; color: var(--text-primary); font-size: 1.1rem;"><i
                                                class="ph-bold ph-text-underline"></i></button>
                                    </div>
                                    <div ref="notesEditor" class="editor-content" contenteditable="true"
                                        @input="updateNoteContent" v-html="selectedNote.content"></div>
                                </div>
                                <div v-else
                                    style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--text-secondary); opacity: 0.5;">
                                    <i class="ph-fill ph-notebook" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                                    <p>Select a note to view or edit</p>
                                </div>
                            </div>
                        </div>

                        <!-- Whiteboard Tab -->
                        <div v-if="activeTab === 'whiteboard'"
                            style="height: calc(100vh - 150px); display: flex; gap: 1rem;">
                            <div class="wb-tools"
                                style="width: 60px; background: var(--bg-card); padding: 1rem; border-radius: 12px; display: flex; flex-direction: column; gap: 1rem; align-items: center; box-shadow: var(--shadow-card);">
                                <button @click="wbTool = 'pen'"
                                    :style="{color: wbTool === 'pen' ? 'var(--primary-color)' : 'var(--text-secondary)'}"
                                    style="background: transparent; border: none; font-size: 1.5rem; cursor: pointer;"><i
                                        class="ph-bold ph-pencil-simple"></i></button>
                                <button @click="wbTool = 'eraser'"
                                    :style="{color: wbTool === 'eraser' ? 'var(--primary-color)' : 'var(--text-secondary)'}"
                                    style="background: transparent; border: none; font-size: 1.5rem; cursor: pointer;"><i
                                        class="ph-bold ph-eraser"></i></button>
                                <div style="height: 1px; width: 100%; background: var(--border-color);"></div>
                                <div v-for="color in wbColors" :key="color" @click="wbColor = color"
                                    :style="{background: color, border: wbColor === color ? '2px solid var(--text-primary)' : 'none'}"
                                    style="width: 24px; height: 24px; border-radius: 50%; cursor: pointer;"></div>
                                <div style="margin-top: auto;">
                                    <button @click="clearWhiteboard"
                                        style="background: transparent; border: none; font-size: 1.5rem; color: #EF4444; cursor: pointer;"
                                        title="Clear Board"><i class="ph-bold ph-trash"></i></button>
                                </div>
                            </div>
                            <div class="wb-canvas-container"
                                style="flex: 1; background: white; border-radius: 20px; box-shadow: var(--shadow-card); overflow: hidden; position: relative;">
                                <canvas ref="whiteboardCanvas"
                                    style="width: 100%; height: 100%; cursor: crosshair; touch-action: none;"></canvas>
                            </div>
                        </div>

                    </div>

                    <!-- AI Assistant Tab (Dedicated Page) -->
                    <div v-if="activeTab === 'ai_assistant'"
                        style="height: calc(100vh - 150px); display: flex; gap: 0; background: var(--bg-card); border-radius: 20px; overflow: hidden; border: 1px solid var(--border-color);">

                        <!-- History Sidebar -->
                        <div class="ai-history"
                            style="width: 260px; background: var(--bg-body); border-right: 1px solid var(--border-color); display: flex; flex-direction: column;">
                            <div style="padding: 1.5rem 1rem; border-bottom: 1px solid var(--border-color);">
                                <button @click="startNewChat"
                                    style="width: 100%; border: 1px dashed var(--border-color); background: transparent; padding: 0.75rem; border-radius: 8px; color: var(--text-primary); cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.2s;">
                                    <i class="ph-bold ph-plus"></i> New Chat
                                </button>
                            </div>
                            <div class="history-list" style="flex: 1; overflow-y: auto; padding: 1rem;">
                                <div
                                    style="font-size: 0.8rem; font-weight: 700; color: var(--text-secondary); margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;">
                                    Recent</div>
                                <div v-for="chat in aiHistory" :key="chat.id" class="history-item"
                                    style="padding: 0.75rem; border-radius: 8px; cursor: pointer; color: var(--text-primary); margin-bottom: 0.5rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: flex; align-items: center; gap: 0.5rem; transition: background 0.2s;">
                                    <i class="ph-regular ph-chat-circle"></i>
                                    <span style="font-size: 0.9rem;">{{ chat.title }}</span>
                                </div>
                            </div>
                            <div style="padding: 1rem; border-top: 1px solid var(--border-color);">
                                <div
                                    style="font-size: 0.8rem; color: var(--text-secondary); display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <i class="ph-bold ph-trash"></i> Clear conversations
                                </div>
                            </div>
                        </div>

                        <!-- Chat Area -->
                        <div class="ai-chat-main"
                            style="flex: 1; display: flex; flex-direction: column; position: relative;">
                            <!-- Empty State / Welcome -->
                            <div v-if="chatMessages.length === 0"
                                style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2rem; color: var(--text-primary);">
                                <div
                                    style="width: 64px; height: 64px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; box-shadow: 0 4px 15px rgba(20, 184, 166, 0.4);">
                                    <i class="ph-fill ph-sparkle"></i>
                                </div>
                                <h2 style="font-size: 1.75rem; font-weight: 700;">How can I help you study?</h2>

                                <div class="suggestions"
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; width: 100%; max-width: 600px; padding: 0 2rem;">
                                    <button @click="sendSuggestion('Explain Quantum Mechanics')"
                                        class="suggestion-chip">
                                        <div>Explain complex topics</div>
                                        <div>Like quantum mechanics</div>
                                    </button>
                                    <button @click="sendSuggestion('Quiz me on Chemistry')" class="suggestion-chip">
                                        <div>Practice Quiz</div>
                                        <div>Test your knowledge</div>
                                    </button>
                                    <button @click="sendSuggestion('Summarize my notes')" class="suggestion-chip">
                                        <div>Summarize</div>
                                        <div>Condense long texts</div>
                                    </button>
                                    <button @click="sendSuggestion('Create a study plan')" class="suggestion-chip">
                                        <div>Study Plan</div>
                                        <div>Organize your schedule</div>
                                    </button>
                                </div>
                            </div>

                            <!-- Messages -->
                            <div v-else class="ai-messages-scroll" ref="aiChatScroll"
                                style="flex: 1; overflow-y: auto; padding: 2rem; display: flex; flex-direction: column; gap: 1.5rem;">
                                <div v-for="msg in chatMessages" :key="msg.id"
                                    :style="{alignSelf: msg.sender === 'user' ? 'flex-end' : 'flex-start', maxWidth: '70%'}">
                                    <div :style="{
                                            padding: '1rem 1.5rem', 
                                            borderRadius: msg.sender === 'user' ? '20px 20px 0 20px' : '20px 20px 20px 0',
                                            background: msg.sender === 'user' ? 'var(--primary-color)' : 'var(--bg-body)',
                                            color: msg.sender === 'user' ? 'white' : 'var(--text-primary)',
                                            boxShadow: 'var(--shadow-card)',
                                            lineHeight: '1.6'
                                        }">
                                        <div v-if="msg.sender === 'ai'"
                                            style="display: flex; gap: 0.75rem; margin-bottom: 0.5rem; align-items: center; font-size: 0.85rem; font-weight: 700; opacity: 0.7;">
                                            <i class="ph-fill ph-sparkle"></i> Study Buddy
                                        </div>
                                        <div v-html="msg.content"></div>
                                    </div>
                                </div>
                                <div v-if="isAiTyping"
                                    style="align-self: flex-start; background: var(--bg-body); padding: 1rem; border-radius: 20px 20px 20px 0; box-shadow: var(--shadow-card);">
                                    <div class="typing-indicator" style="display: flex; gap: 4px;">
                                        <span
                                            style="width: 6px; height: 6px; background: var(--text-secondary); border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both;"></span>
                                        <span
                                            style="width: 6px; height: 6px; background: var(--text-secondary); border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; animation-delay: -0.32s;"></span>
                                        <span
                                            style="width: 6px; height: 6px; background: var(--text-secondary); border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; animation-delay: -0.16s;"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Input Area -->
                            <div style="padding: 1.5rem 2rem; background: var(--bg-card);">
                                <div style="position: relative; max-width: 800px; margin: 0 auto;">
                                    <textarea v-model="chatInput" @keyup.enter.prevent="sendMessage"
                                        placeholder="Ask anything about your studies..."
                                        style="width: 100%; padding: 1rem 3rem 1rem 1.5rem; border: 1px solid var(--border-color); border-radius: 16px; background: var(--bg-body); color: var(--text-primary); resize: none; outline: none; height: 60px; font-family: inherit; box-shadow: var(--shadow-card);"></textarea>
                                    <button @click="sendMessage"
                                        style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); background: var(--primary-color); color: white; width: 32px; height: 32px; border-radius: 8px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
                                        <i class="ph-bold ph-paper-plane-right"></i>
                                    </button>
                                </div>
                                <div
                                    style="text-align: center; font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.75rem;">
                                    Study Buddy AI can make mistakes. Verify important information.
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

    </div>

    <!-- Floating AI Chat Widget (Hidden if activeTab is 'ai_assistant') -->
    <!-- Floating AI Chat Widget REMOVED per user request (Duplicate of full screen page) -->

    <!-- Right Panel (Persists across tabs or just on overview? Images suggest persistent or at least key part) -->
    <!-- We'll keep it visible as per the design layout -->
    <!-- Right Panel (Visible only on Overview) -->
    <aside class="right-panel" v-if="activeTab === 'overview'">

        <!-- Section 1: Course in Progress -->
        <div class="right-panel-section">
            <div class="section-title">
                <h3>Upcoming Sessions</h3>
            </div>

            <div class="course-progress-list">
                <!-- Item 1 -->
                <div class="course-item" @click="activeTab = 'calendar'">
                    <div class="course-icon bg-orange-light">
                        <i class="ph-fill ph-flask"></i>
                    </div>
                    <div class="course-info">
                        <div class="course-name">Chemistry With Priya</div>
                        <div class="course-sub">Today, 3:00 PM</div>
                    </div>
                    <i class="ph-bold ph-caret-right"></i>
                </div>

                <!-- Item 2 -->
                <div class="course-item" @click="activeTab = 'calendar'">
                    <div class="course-icon bg-purple-light">
                        <i class="ph-fill ph-math-operations"></i>
                    </div>
                    <div class="course-info">
                        <div class="course-name">Math Mock Exam</div>
                        <div class="course-sub">Oct 25, 10:00 AM</div>
                    </div>
                    <i class="ph-bold ph-caret-right"></i>
                </div>

                <!-- Item Removed: Forum Answer is not a Session -->
            </div>
        </div>

        <!-- Section 2: Learning Point (Graph) -->
        <!-- Section 2: Weekly Activity REMOVED per user request -->
        <!-- <div class="right-panel-section" style="margin-top: auto;"> ... </div> -->

    </aside>

    </main>

    <!-- Modals (Preserved) -->
    <div v-if="showBookingConfirmation" class="booking-confirmation-modal">
        <!-- Content preserved from original scripts -->
    </div>

    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="module" src="/scripts/mentee-dashboard.js"></script>
</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Buddy - Whiteboard</title>
    <link rel="stylesheet" href="/styles/design-system.css">
    <link rel="stylesheet" href="/styles/whiteboard.css">
    <script src="https://unpkg.com/@phosphor-icons/web@2.0.3"></script>
</head>

<body>
    <div id="app">
        <div class="toolbar">
            <div class="toolbar-left">
                <a href="/tools/notes" class="back-btn">
                    <i class="ph-bold ph-arrow-left"></i>
                    Back to Notes
                </a>
            </div>

            <div class="toolbar-center">
                <div class="tool-group">
                    <button :class="['tool-btn', {active: tool === 'pen'}]" @click="selectTool('pen')">
                        <i class="ph-bold ph-pen"></i>
                    </button>
                    <button :class="['tool-btn', {active: tool === 'highlighter'}]" @click="selectTool('highlighter')">
                        <i class="ph-bold ph-highlighter-circle"></i>
                    </button>
                    <button :class="['tool-btn', {active: tool === 'eraser'}]" @click="selectTool('eraser')">
                        <i class="ph-bold ph-eraser"></i>
                    </button>
                </div>

                <div class="divider"></div>

                <!-- Pen Sizes -->
                <div class="tool-group">
                    <button :class="['size-btn', {active: penSize === 2}]" @click="setPenSize(2)">
                        <span class="size-dot" style="width: 4px; height: 4px;"></span>
                    </button>
                    <button :class="['size-btn', {active: penSize === 4}]" @click="setPenSize(4)">
                        <span class="size-dot" style="width: 8px; height: 8px;"></span>
                    </button>
                    <button :class="['size-btn', {active: penSize === 8}]" @click="setPenSize(8)">
                        <span class="size-dot" style="width: 12px; height: 12px;"></span>
                    </button>
                    <button :class="['size-btn', {active: penSize === 16}]" @click="setPenSize(16)">
                        <span class="size-dot" style="width: 16px; height: 16px;"></span>
                    </button>
                </div>

                <div class="divider"></div>

                <!-- Colors -->
                <div class="tool-group">
                    <button class="color-btn" v-for="color in colors" :key="color" :class="{active: penColor === color}"
                        :style="{background: color}" @click="setPenColor(color)">
                    </button>
                </div>

                <div class="divider"></div>

                <button class="tool-btn" @click="clearCanvas">
                    <i class="ph-bold ph-trash"></i>
                </button>

                <button class="tool-btn" @click="undo">
                    <i class="ph-bold ph-arrow-u-up-left"></i>
                </button>
            </div>

            <div class="toolbar-right">
                <button class="save-btn" @click="saveWhiteboard">
                    <i class="ph-bold ph-floppy-disk"></i>
                    Save
                </button>
            </div>
        </div>

        <!-- Canvas Container -->
        <div class="canvas-container">
            <canvas ref="canvas" @mousedown="startDrawing" @mousemove="draw" @mouseup="stopDrawing"
                @mouseleave="stopDrawing" @touchstart="handleTouchStart" @touchmove="handleTouchMove"
                @touchend="stopDrawing">
            </canvas>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="/scripts/whiteboard.js"></script>
</body>

</html>